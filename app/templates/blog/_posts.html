
{% if posts %}
<!--posts = pagination.items     -->
    {% for post in posts %}
        <h3 class="text-primary"><a href="{{ url_for('blog.show_post', post_id = post.id)}}">{{ post.title }}</a></h3>
        <p>
            {{ post.body|striptags|truncate }}
            <!-- striptags: 我们附加了striptags过滤 器以滤掉文章正文中的HTML标签。 -->

            <!-- .truncate(s: str, length: int = 255, killwords: bool = False, end: str = '...')
            The length is specified with the first parameter which defaults to 255. 
            If the second parameter is true the filter will cut the text at length.
            Otherwise it will discard the last word.\
             If the text was in fact truncated it will append an ellipsis sign ("...") -->
            <small><a href="{{ url_for('blog.show_post', post_id = post.id)}}">Read more</a></small>
            <!-- url_for(script_name.function_name) -->
        </p>
        <small>
            Comments: <a href="{{ url_for('blog.show_post', post_id = post.id)}}#comments">{{ post.comments|length }}</a>&nbsp;&nbsp;
            Category: <a href="{{ url_for('blog.show_category', category_id = post.category_id)}}">{{ post.category.name }}</a>
            <span class="float-right">{{ moment(post.timestamp).format('LL') }}</span>
        </small>
        {% if not loop.last %}
            <hr> 
            <!-- 用<hr>添加分隔线 -->
        {% endif %}
    {% endfor %}
{% else %}
    <div class="tip">
        <h5>No posts yet.</h5>
        {% if current_user.is_authenticated %}
            <a href="{{ url_for('admin.new_post') }}">Write Now</a>
        {% endif %}
    </div>
{% endif %}